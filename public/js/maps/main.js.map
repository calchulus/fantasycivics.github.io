{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_views","_scoring","config","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","db","firebase","initializeApp","database","views","Views","scorer","Scoring","now","Date","lastMonth","getUTCMonth","TIME_RANGE","getUTCFullYear","getTime","console","log","ref","orderByChild","startAt","endAt","once","snap","nodes","val","playerNodes","Object","keys","map","key","aldMap","forEach","data","pid","playerid","rows","sort","b","player","PLAYER_MAP","breakdown","getScoreBreakdown","points","getScorePoints","score","getScore","name","ward","table","getAldersTable","out","document","querySelector","innerHTML","appendChild","Sortable","initTable","Array","from","querySelectorAll","button","addEventListener","dataset","alderView","getAlderView","profile","titles","TITLE","alderVex","vex","dialog","alert","unsafeMessage","buttons","type","text","className","click","close","./scoring","./views","2","defineProperty","value","DATASETS_311","WEIGHT","absent","contrarian","win","lose","pass","fail","complete","incomplete","did","votes_absent","votes_no_mayor","votes_yes_pass","votes_no_fail","votes_yes_fail","votes_no_pass","sponsor_pass","sponsor_fail","bid","count","sum","3","model","html","row","createElement","classList","add","setAttribute","div"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _views = require('./views');\n\nvar _scoring = require('./scoring');\n\nvar config = {\n\tapiKey: \"AIzaSyDusGUpsFfhJmRnmB2cgfetwR3ZR2otqe4\",\n\tauthDomain: \"fantasycivics.firebaseapp.com\",\n\tdatabaseURL: \"https://fantasycivics.firebaseio.com\",\n\tstorageBucket: \"fantasycivics.appspot.com\",\n\tmessagingSenderId: \"245596715039\"\n};\nvar DatabaseFirebase = firebase.initializeApp(config, 'Fantasy Civics Game');\nvar db = DatabaseFirebase.database();\n\nvar views = (0, _views.Views)();\nvar scorer = (0, _scoring.Scoring)();\n\nvar now = new Date('8/1/2017');\nvar lastMonth = now.getUTCMonth() - 1;\nvar dStart = new Date(now.getUTCFullYear(), lastMonth).getTime();\nvar dEnd = new Date(now.getUTCFullYear(), now.getUTCMonth()).getTime();\n\nvar TIME_RANGE = [dStart, dEnd];\n\nconsole.log(TIME_RANGE);\n\nvar ref = db.ref('player_scores');\nvar query = ref.orderByChild('timestamp').startAt(TIME_RANGE[0]).endAt(TIME_RANGE[1]);\nquery.once('value', function (snap) {\n\n\tvar nodes = snap.val() || {};\n\n\tvar playerNodes = Object.keys(nodes).map(function (key) {\n\t\tvar val = nodes[key];\n\t\tval.key = key;\n\t\treturn val;\n\t});\n\n\tvar aldMap = {};\n\tplayerNodes.forEach(function (data) {\n\t\tvar pid = data.playerid;\n\t\taldMap[pid] = data;\n\t});\n\n\tconsole.log(aldMap);\n\n\tvar rows = playerNodes.sort(function (a, b) {\n\t\treturn 0;\n\t}).map(function (data) {\n\t\tvar player = PLAYER_MAP[data.playerid];\n\t\tvar breakdown = scorer.getScoreBreakdown(data);\n\t\tvar points = scorer.getScorePoints(breakdown);\n\t\tvar score = scorer.getScore(points);\n\t\treturn {\n\t\t\tplayerid: data.playerid,\n\t\t\tname: player.name,\n\t\t\tward: player.ward,\n\t\t\tlastMonth: score\n\t\t};\n\t});\n\n\tvar table = views.getAldersTable({\n\t\trows: rows\n\t});\n\tvar out = document.querySelector('#alders-table');\n\tout.innerHTML = '';\n\tout.appendChild(table);\n\tSortable.initTable(table);\n\tvar buttons = Array.from(table.querySelectorAll('button[data-playerid]'));\n\tbuttons.forEach(function (button) {\n\t\tbutton.addEventListener('click', function (e) {\n\t\t\tvar playerid = button.dataset.playerid;\n\t\t\tvar player = PLAYER_MAP[playerid];\n\t\t\tvar data = aldMap[playerid];\n\t\t\tvar breakdown = scorer.getScoreBreakdown(data);\n\t\t\tvar points = scorer.getScorePoints(breakdown);\n\t\t\tvar score = scorer.getScore(points);\n\t\t\tvar alderView = views.getAlderView({\n\t\t\t\tplayerid: playerid,\n\t\t\t\tprofile: player,\n\t\t\t\tbreakdown: breakdown,\n\t\t\t\tpoints: points,\n\t\t\t\tscore: score,\n\t\t\t\ttitles: scorer.TITLE\n\t\t\t});\n\t\t\tvar alderVex = vex.dialog.alert({\n\t\t\t\tunsafeMessage: alderView.innerHTML,\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttype: 'button',\n\t\t\t\t\ttext: 'Add To Roster',\n\t\t\t\t\tclassName: 'vex-dialog-button-primary',\n\t\t\t\t\tclick: function click(e) {\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\ttype: 'button',\n\t\t\t\t\ttext: 'Cancel',\n\t\t\t\t\tclassName: 'vex-dialog-button-secondary',\n\t\t\t\t\tclick: function click(e) {\n\t\t\t\t\t\talderVex.close();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t});\n\t\t});\n\t});\n});\n\n},{\"./scoring\":2,\"./views\":3}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Scoring = function Scoring() {\n\n\tvar DATASETS_311 = ['graffiti', 'pot_holes', 'rodent_baiting'];\n\n\tvar WEIGHT = {\n\t\tabsent: -1,\n\t\tcontrarian: 10,\n\t\twin: 1,\n\t\tlose: -1,\n\t\tpass: 7,\n\t\tfail: -14,\n\t\tcomplete: 1,\n\t\tincomplete: -1\n\t};\n\n\tvar TITLE = {\n\t\tabsent: 'Absent',\n\t\tcontrarian: 'Vote Against Mayor',\n\t\twin: 'Won Vote',\n\t\tlose: 'Lost Vote',\n\t\tpass: 'Passed Bill',\n\t\tfail: 'Failed Bill',\n\t\tcomplete: 'Complete 311',\n\t\tincomplete: 'Incomplete 311'\n\t};\n\n\tvar getScoreBreakdown = function getScoreBreakdown(data) {\n\t\tvar breakdown = {\n\t\t\tabsent: 0,\n\t\t\tcontrarian: 0,\n\t\t\twin: 0,\n\t\t\tlose: 0,\n\t\t\tpass: 0,\n\t\t\tfail: 0,\n\t\t\tcomplete: 0,\n\t\t\tincomplete: 0\n\t\t};\n\t\tDATASETS_311.forEach(function (did) {\n\t\t\tvar complete = data['complete_' + did];\n\t\t\tvar incomplete = data['incomplete_' + did];\n\t\t\tbreakdown.complete += complete;\n\t\t\tbreakdown.incomplete += incomplete;\n\t\t});\n\t\tbreakdown.absent = data.votes_absent;\n\t\tbreakdown.contrarian = data.votes_no_mayor;\n\t\tbreakdown.win = data.votes_yes_pass + data.votes_no_fail;\n\t\tbreakdown.lose = data.votes_yes_fail + data.votes_no_pass;\n\t\tbreakdown.pass = data.sponsor_pass;\n\t\tbreakdown.fail = data.sponsor_fail;\n\t\treturn breakdown;\n\t};\n\n\tvar getScorePoints = function getScorePoints(breakdown) {\n\t\tvar points = {};\n\t\tfor (var bid in breakdown) {\n\t\t\tvar count = breakdown[bid];\n\t\t\tpoints[bid] = count * WEIGHT[bid];\n\t\t}\n\t\treturn points;\n\t};\n\n\tvar getScore = function getScore(breakdown) {\n\t\tvar sum = 0;\n\t\tfor (var bid in breakdown) {\n\t\t\tsum += breakdown[bid];\n\t\t}\n\t\treturn sum;\n\t};\n\n\treturn {\n\t\tDATASETS_311: DATASETS_311,\n\t\tWEIGHT: WEIGHT,\n\t\tTITLE: TITLE,\n\t\tgetScoreBreakdown: getScoreBreakdown,\n\t\tgetScorePoints: getScorePoints,\n\t\tgetScore: getScore\n\t};\n};\n\nexports.Scoring = Scoring;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\tvar views = {\n\n\t\tgetAldersTable: function getAldersTable(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<th>Name</th>\\n\\t\\t\\t\\t\\t\\t<th>Ward</th>\\n\\t\\t\\t\\t\\t\\t<th>Score</th>\\n\\t\\t\\t\\t\\t\\t<th>View</th>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t<tbody>\\n\\t\\t\\t';\n\t\t\tmodel.rows.forEach(function (row) {\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td>' + row.name + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + row.ward + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + row.lastMonth + '</td>\\n\\t\\t\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t\\t\\t<button data-playerid=\"' + row.playerid + '\" class=\"button is-primary is-outlined\">View</button>\\n\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t';\n\t\t\t});\n\t\t\thtml += '\\n\\t\\t\\t\\t</tbody>\\n\\t\\t\\t';\n\t\t\tvar table = document.createElement('table');\n\t\t\ttable.innerHTML = html;\n\t\t\ttable.classList.add('table');\n\t\t\ttable.classList.add('sortable-theme-bootstrap');\n\t\t\ttable.setAttribute('data-sortable', true);\n\t\t\treturn table;\n\t\t},\n\n\t\tgetAlderView: function getAlderView(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t<div class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t<figure class=\"image is-48x48 headshot-holder\">\\n\\t\\t\\t\\t\\t\\t\\t<img class=\"headshot-img\" src=\"../public/img/headshots/' + model.playerid + '.png\" alt=\"' + model.profile.name + '\">\\n\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\"media-content\">\\n\\t\\t\\t\\t\\t\\t<p class=\"title is-4\">' + model.profile.name + '</p>\\n\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">Ward ' + model.profile.ward + '</p>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<table class=\"table is-fullwidth\">\\n\\t\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t<th>Category</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>Points</th>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t\\t<tbody>\\n\\t\\t\\t';\n\t\t\tfor (var bid in model.points) {\n\t\t\t\tvar value = model.points[bid];\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td>' + model.titles[bid] + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + (value > 0 ? '+' : '') + value + '</td>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t';\n\t\t\t}\n\t\t\thtml += '\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<th>Total</th>\\n\\t\\t\\t\\t\\t<th>' + model.score + '</th>\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t';\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t</tbody>\\n\\t\\t\\t\\t</table>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9zY29yaW5nLmpzIiwic3JjL2pzL3ZpZXdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7QUFDQTs7QUFFQSxJQUFJLFNBQVM7QUFDWixTQUFRLHlDQURJO0FBRVosYUFBWSwrQkFGQTtBQUdaLGNBQWEsc0NBSEQ7QUFJWixnQkFBZSwyQkFKSDtBQUtaLG9CQUFtQjtBQUxQLENBQWI7QUFPQSxJQUFJLG1CQUFtQixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0IscUJBQS9CLENBQXZCO0FBQ0EsSUFBSSxLQUFLLGlCQUFpQixRQUFqQixFQUFUOztBQUVBLElBQUksUUFBUSxtQkFBWjtBQUNBLElBQUksU0FBUyx1QkFBYjs7QUFFQSxJQUFJLE1BQU0sSUFBSSxJQUFKLENBQVMsVUFBVCxDQUFWO0FBQ0EsSUFBSSxZQUFZLElBQUksV0FBSixLQUFvQixDQUFwQztBQUNBLElBQUksU0FBUyxJQUFJLElBQUosQ0FBUyxJQUFJLGNBQUosRUFBVCxFQUErQixTQUEvQixFQUEwQyxPQUExQyxFQUFiO0FBQ0EsSUFBSSxPQUFPLElBQUksSUFBSixDQUFTLElBQUksY0FBSixFQUFULEVBQStCLElBQUksV0FBSixFQUEvQixFQUFrRCxPQUFsRCxFQUFYOztBQUVBLElBQU0sYUFBYSxDQUFDLE1BQUQsRUFBUyxJQUFULENBQW5COztBQUVBLFFBQVEsR0FBUixDQUFZLFVBQVo7O0FBRUEsSUFBSSxNQUFNLEdBQUcsR0FBSCxpQkFBVjtBQUNBLElBQUksUUFBUSxJQUFJLFlBQUosQ0FBaUIsV0FBakIsRUFBOEIsT0FBOUIsQ0FBc0MsV0FBVyxDQUFYLENBQXRDLEVBQXFELEtBQXJELENBQTJELFdBQVcsQ0FBWCxDQUEzRCxDQUFaO0FBQ0EsTUFBTSxJQUFOLENBQVcsT0FBWCxFQUFvQixVQUFDLElBQUQsRUFBVTs7QUFFN0IsS0FB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Z0IsR0FBaEIsQ0FBb0IsT0FBcEI7QUFDQSxTQUFNLFNBQU4sQ0FBZ0IsR0FBaEIsQ0FBb0IsMEJBQXBCO0FBQ0EsU0FBTSxZQUFOLENBQW1CLGVBQW5CLEVBQW9DLElBQXBDO0FBQ0QsVUFBTyxLQUFQO0FBQ0EsR0FuQ1U7O0FBcUNYLGdCQUFjLHNCQUFDLEtBQUQsRUFBVztBQUN4QixPQUFJLGlOQUl5RCxNQUFNLFFBSi9ELG1CQUlxRixNQUFNLE9BQU4sQ0FBYyxJQUpuRyw4SEFRdUIsTUFBTSxPQUFOLENBQWMsSUFSckMsd0RBUytCLE1BQU0sT0FBTixDQUFjLElBVDdDLDhQQUFKO0FBcUJBLFFBQUssSUFBSSxHQUFULElBQWdCLE1BQU0sTUFBdEIsRUFBOEI7QUFDN0IsUUFBSSxRQUFRLE1BQU0sTUFBTixDQUFhLEdBQWIsQ0FBWjtBQUNBLG1EQUVRLE1BQU0sTUFBTixDQUFhLEdBQWIsQ0FGUixnQ0FHUSxRQUFRLENBQVIsR0FBWSxHQUFaLEdBQWtCLEVBSDFCLElBRytCLEtBSC9CO0FBTUE7QUFDRCx3RUFHUSxNQUFNLEtBSGQ7QUFNQTtBQUlBLE9BQUksTUFBTSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNDLE9BQUksU0FBSixHQUFnQixJQUFoQjtBQUNELFVBQU8sR0FBUDtBQUNBOztBQWpGVSxFQUFaO0FBb0ZBLFFBQU8sS0FBUDtBQUNBLENBdEZEOztRQXdGUSxLLEdBQUEsSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQge1ZpZXdzfSBmcm9tICcuL3ZpZXdzJztcbmltcG9ydCB7U2NvcmluZ30gZnJvbSAnLi9zY29yaW5nJztcblxubGV0IGNvbmZpZyA9IHtcblx0YXBpS2V5OiBcIkFJemFTeUR1c0dVcHNGZmhKbVJubUIyY2dmZXR3UjNaUjJvdHFlNFwiLFxuXHRhdXRoRG9tYWluOiBcImZhbnRhc3ljaXZpY3MuZmlyZWJhc2VhcHAuY29tXCIsXG5cdGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vZmFudGFzeWNpdmljcy5maXJlYmFzZWlvLmNvbVwiLFxuXHRzdG9yYWdlQnVja2V0OiBcImZhbnRhc3ljaXZpY3MuYXBwc3BvdC5jb21cIixcblx0bWVzc2FnaW5nU2VuZGVySWQ6IFwiMjQ1NTk2NzE1MDM5XCJcbn07XG5sZXQgRGF0YWJhc2VGaXJlYmFzZSA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnLCAnRmFudGFzeSBDaXZpY3MgR2FtZScpO1xubGV0IGRiID0gRGF0YWJhc2VGaXJlYmFzZS5kYXRhYmFzZSgpO1xuXG5sZXQgdmlld3MgPSBWaWV3cygpO1xubGV0IHNjb3JlciA9IFNjb3JpbmcoKTtcblxubGV0IG5vdyA9IG5ldyBEYXRlKCc4LzEvMjAxNycpO1xubGV0IGxhc3RNb250aCA9IG5vdy5nZXRVVENNb250aCgpIC0gMTtcbmxldCBkU3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0VVRDRnVsbFllYXIoKSwgbGFzdE1vbnRoKS5nZXRUaW1lKCk7XG5sZXQgZEVuZCA9IG5ldyBEYXRlKG5vdy5nZXRVVENGdWxsWWVhcigpLCBub3cuZ2V0VVRDTW9udGgoKSkuZ2V0VGltZSgpO1xuXG5jb25zdCBUSU1FX1JBTkdFID0gW2RTdGFydCwgZEVuZF07XG5cbmNvbnNvbGUubG9nKFRJTUVfUkFOR0UpXG5cbmxldCByZWYgPSBkYi5yZWYoYHBsYXllcl9zY29yZXNgKTtcbmxldCBxdWVyeSA9IHJlZi5vcmRlckJ5Q2hpbGQoJ3RpbWVzdGFtcCcpLnN0YXJ0QXQoVElNRV9SQU5HRVswXSkuZW5kQXQoVElNRV9SQU5HRVsxXSk7XG5xdWVyeS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cblx0bGV0IG5vZGVzID0gc25hcC52YWwoKSB8fCB7fTtcblxuXHRsZXQgcGxheWVyTm9kZXMgPSBPYmplY3Qua2V5cyhub2RlcykubWFwKChrZXkpID0+IHtcblx0XHRsZXQgdmFsID0gbm9kZXNba2V5XTtcblx0XHRcdHZhbC5rZXkgPSBrZXk7XG5cdFx0cmV0dXJuIHZhbDtcblx0fSk7XG5cblx0bGV0IGFsZE1hcCA9IHt9O1xuXHRwbGF5ZXJOb2Rlcy5mb3JFYWNoKChkYXRhKSA9PiB7XG5cdFx0bGV0IHBpZCA9IGRhdGEucGxheWVyaWQ7XG5cdFx0YWxkTWFwW3BpZF0gPSBkYXRhO1xuXHR9KTtcblxuXHRjb25zb2xlLmxvZyhhbGRNYXApO1xuXG5cdGxldCByb3dzID0gcGxheWVyTm9kZXMuc29ydCgoYSwgYikgPT4ge1xuXHRcdHJldHVybiAwO1xuXHR9KS5tYXAoKGRhdGEpID0+IHtcblx0XHRsZXQgcGxheWVyID0gUExBWUVSX01BUFtkYXRhLnBsYXllcmlkXTtcblx0XHRsZXQgYnJlYWtkb3duID0gc2NvcmVyLmdldFNjb3JlQnJlYWtkb3duKGRhdGEpO1xuXHRcdGxldCBwb2ludHMgPSBzY29yZXIuZ2V0U2NvcmVQb2ludHMoYnJlYWtkb3duKTtcblx0XHRsZXQgc2NvcmUgPSBzY29yZXIuZ2V0U2NvcmUocG9pbnRzKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cGxheWVyaWQ6IGRhdGEucGxheWVyaWQsXG5cdFx0XHRuYW1lOiBwbGF5ZXIubmFtZSxcblx0XHRcdHdhcmQ6IHBsYXllci53YXJkLFxuXHRcdFx0bGFzdE1vbnRoOiBzY29yZVxuXHRcdH07XG5cdH0pO1xuXG5cdGxldCB0YWJsZSA9IHZpZXdzLmdldEFsZGVyc1RhYmxlKHtcblx0XHRyb3dzOiByb3dzXG5cdH0pO1xuXHRsZXQgb3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZGVycy10YWJsZScpO1xuXHRvdXQuaW5uZXJIVE1MID0gJyc7XG5cdG91dC5hcHBlbmRDaGlsZCh0YWJsZSk7XG5cdFNvcnRhYmxlLmluaXRUYWJsZSh0YWJsZSk7XG5cdGxldCBidXR0b25zID0gQXJyYXkuZnJvbSh0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bZGF0YS1wbGF5ZXJpZF0nKSk7XG5cdGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG5cdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGxldCBwbGF5ZXJpZCA9IGJ1dHRvbi5kYXRhc2V0LnBsYXllcmlkO1xuXHRcdFx0bGV0IHBsYXllciA9IFBMQVlFUl9NQVBbcGxheWVyaWRdO1xuXHRcdFx0bGV0IGRhdGEgPSBhbGRNYXBbcGxheWVyaWRdO1xuXHRcdFx0bGV0IGJyZWFrZG93biA9IHNjb3Jlci5nZXRTY29yZUJyZWFrZG93bihkYXRhKTtcblx0XHRcdGxldCBwb2ludHMgPSBzY29yZXIuZ2V0U2NvcmVQb2ludHMoYnJlYWtkb3duKTtcblx0XHRcdGxldCBzY29yZSA9IHNjb3Jlci5nZXRTY29yZShwb2ludHMpO1xuXHRcdFx0bGV0IGFsZGVyVmlldyA9IHZpZXdzLmdldEFsZGVyVmlldyh7XG5cdFx0XHRcdHBsYXllcmlkOiBwbGF5ZXJpZCxcblx0XHRcdFx0cHJvZmlsZTogcGxheWVyLFxuXHRcdFx0XHRicmVha2Rvd246IGJyZWFrZG93bixcblx0XHRcdFx0cG9pbnRzOiBwb2ludHMsXG5cdFx0XHRcdHNjb3JlOiBzY29yZSxcblx0XHRcdFx0dGl0bGVzOiBzY29yZXIuVElUTEVcblx0XHRcdH0pO1xuXHRcdFx0bGV0IGFsZGVyVmV4ID0gdmV4LmRpYWxvZy5hbGVydCh7XG5cdFx0XHRcdHVuc2FmZU1lc3NhZ2U6IGFsZGVyVmlldy5pbm5lckhUTUwsXG5cdFx0XHRcdGJ1dHRvbnM6IFtcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0eXBlOiAnYnV0dG9uJyxcblx0XHRcdFx0XHRcdHRleHQ6ICdBZGQgVG8gUm9zdGVyJyxcblx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ3ZleC1kaWFsb2ctYnV0dG9uLXByaW1hcnknLFxuXHRcdFx0XHRcdFx0Y2xpY2s6IChlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dHlwZTogJ2J1dHRvbicsXG5cdFx0XHRcdFx0XHR0ZXh0OiAnQ2FuY2VsJyxcblx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ3ZleC1kaWFsb2ctYnV0dG9uLXNlY29uZGFyeScsXG5cdFx0XHRcdFx0XHRjbGljazogKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0YWxkZXJWZXguY2xvc2UoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdF1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9KTtcblxufSk7IiwibGV0IFNjb3JpbmcgPSAoKSA9PiB7XG5cblx0Y29uc3QgREFUQVNFVFNfMzExID0gW1xuXHRcdCdncmFmZml0aScsXG5cdFx0J3BvdF9ob2xlcycsXG5cdFx0J3JvZGVudF9iYWl0aW5nJ1xuXHRdO1xuXG5cdGNvbnN0IFdFSUdIVCA9IHtcblx0XHRhYnNlbnQ6IC0xLFxuXHRcdGNvbnRyYXJpYW46IDEwLFxuXHRcdHdpbjogMSxcblx0XHRsb3NlOiAtMSxcblx0XHRwYXNzOiA3LFxuXHRcdGZhaWw6IC0xNCxcblx0XHRjb21wbGV0ZTogMSxcblx0XHRpbmNvbXBsZXRlOiAtMVxuXHR9O1xuXG5cdGNvbnN0IFRJVExFID0ge1xuXHRcdGFic2VudDogJ0Fic2VudCcsXG5cdFx0Y29udHJhcmlhbjogJ1ZvdGUgQWdhaW5zdCBNYXlvcicsXG5cdFx0d2luOiAnV29uIFZvdGUnLFxuXHRcdGxvc2U6ICdMb3N0IFZvdGUnLFxuXHRcdHBhc3M6ICdQYXNzZWQgQmlsbCcsXG5cdFx0ZmFpbDogJ0ZhaWxlZCBCaWxsJyxcblx0XHRjb21wbGV0ZTogJ0NvbXBsZXRlIDMxMScsXG5cdFx0aW5jb21wbGV0ZTogJ0luY29tcGxldGUgMzExJ1xuXHR9O1xuXG5cdGxldCBnZXRTY29yZUJyZWFrZG93biA9IChkYXRhKSA9PiB7XG5cdFx0bGV0IGJyZWFrZG93biA9IHtcblx0XHRcdGFic2VudDogMCxcblx0XHRcdGNvbnRyYXJpYW46IDAsXG5cdFx0XHR3aW46IDAsXG5cdFx0XHRsb3NlOiAwLFxuXHRcdFx0cGFzczogMCxcblx0XHRcdGZhaWw6IDAsXG5cdFx0XHRjb21wbGV0ZTogMCxcblx0XHRcdGluY29tcGxldGU6IDBcblx0XHR9O1xuXHRcdERBVEFTRVRTXzMxMS5mb3JFYWNoKChkaWQpID0+IHtcblx0XHRcdGxldCBjb21wbGV0ZSA9IGRhdGFbYGNvbXBsZXRlXyR7ZGlkfWBdO1xuXHRcdFx0bGV0IGluY29tcGxldGUgPSBkYXRhW2BpbmNvbXBsZXRlXyR7ZGlkfWBdO1xuXHRcdFx0YnJlYWtkb3duLmNvbXBsZXRlICs9IGNvbXBsZXRlO1xuXHRcdFx0YnJlYWtkb3duLmluY29tcGxldGUgKz0gaW5jb21wbGV0ZTtcblx0XHR9KTtcblx0XHRicmVha2Rvd24uYWJzZW50ID0gZGF0YS52b3Rlc19hYnNlbnQ7XG5cdFx0YnJlYWtkb3duLmNvbnRyYXJpYW4gPSBkYXRhLnZvdGVzX25vX21heW9yO1xuXHRcdGJyZWFrZG93bi53aW4gPSBkYXRhLnZvdGVzX3llc19wYXNzICsgZGF0YS52b3Rlc19ub19mYWlsXG5cdFx0YnJlYWtkb3duLmxvc2UgPSBkYXRhLnZvdGVzX3llc19mYWlsICsgZGF0YS52b3Rlc19ub19wYXNzXG5cdFx0YnJlYWtkb3duLnBhc3MgPSBkYXRhLnNwb25zb3JfcGFzcztcblx0XHRicmVha2Rvd24uZmFpbCA9IGRhdGEuc3BvbnNvcl9mYWlsO1xuXHRcdHJldHVybiBicmVha2Rvd247XHRcblx0fVxuXG5cdGxldCBnZXRTY29yZVBvaW50cyA9IChicmVha2Rvd24pID0+IHtcblx0XHRsZXQgcG9pbnRzID0ge307XG5cdFx0Zm9yIChsZXQgYmlkIGluIGJyZWFrZG93bikge1xuXHRcdFx0bGV0IGNvdW50ID0gYnJlYWtkb3duW2JpZF07XG5cdFx0XHRwb2ludHNbYmlkXSA9IGNvdW50ICogV0VJR0hUW2JpZF07XG5cdFx0fVxuXHRcdHJldHVybiBwb2ludHM7XG5cdH1cblxuXHRsZXQgZ2V0U2NvcmUgPSAoYnJlYWtkb3duKSA9PiB7XG5cdFx0bGV0IHN1bSA9IDA7XG5cdFx0Zm9yIChsZXQgYmlkIGluIGJyZWFrZG93bikge1xuXHRcdFx0c3VtICs9IGJyZWFrZG93bltiaWRdO1xuXHRcdH1cblx0XHRyZXR1cm4gc3VtO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHREQVRBU0VUU18zMTE6IERBVEFTRVRTXzMxMSxcblx0XHRXRUlHSFQ6IFdFSUdIVCxcblx0XHRUSVRMRTogVElUTEUsXG5cdFx0Z2V0U2NvcmVCcmVha2Rvd246IGdldFNjb3JlQnJlYWtkb3duLFxuXHRcdGdldFNjb3JlUG9pbnRzOiBnZXRTY29yZVBvaW50cyxcblx0XHRnZXRTY29yZTogZ2V0U2NvcmVcblx0fTtcblxufVxuXG5leHBvcnQge1Njb3Jpbmd9OyIsImxldCBWaWV3cyA9ICgpID0+IHtcblx0bGV0IHZpZXdzID0ge1xuXG5cdFx0Z2V0QWxkZXJzVGFibGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDx0aGVhZD5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+TmFtZTwvdGg+XG5cdFx0XHRcdFx0XHQ8dGg+V2FyZDwvdGg+XG5cdFx0XHRcdFx0XHQ8dGg+U2NvcmU8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPlZpZXc8L3RoPlxuXHRcdFx0XHRcdDwvdHI+XG5cdFx0XHRcdDwvdGhlYWQ+XG5cdFx0XHRcdDx0Ym9keT5cblx0XHRcdGA7XG5cdFx0XHRtb2RlbC5yb3dzLmZvckVhY2goKHJvdykgPT4ge1xuXHRcdFx0XHRodG1sICs9IGBcblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGQ+JHtyb3cubmFtZX08L3RkPlxuXHRcdFx0XHRcdFx0PHRkPiR7cm93LndhcmR9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD4ke3Jvdy5sYXN0TW9udGh9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD5cblx0XHRcdFx0XHRcdFx0PGJ1dHRvbiBkYXRhLXBsYXllcmlkPVwiJHtyb3cucGxheWVyaWR9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlZpZXc8L2J1dHRvbj5cblx0XHRcdFx0XHRcdDwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0YDtcblx0XHRcdH0pO1xuXHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdDwvdGJvZHk+XG5cdFx0XHRgO1xuXHRcdFx0bGV0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcblx0XHRcdFx0dGFibGUuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdFx0dGFibGUuY2xhc3NMaXN0LmFkZCgndGFibGUnKTtcblx0XHRcdFx0dGFibGUuY2xhc3NMaXN0LmFkZCgnc29ydGFibGUtdGhlbWUtYm9vdHN0cmFwJyk7XG5cdFx0XHRcdHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zb3J0YWJsZScsIHRydWUpO1xuXHRcdFx0cmV0dXJuIHRhYmxlO1xuXHRcdH0sXG5cblx0XHRnZXRBbGRlclZpZXc6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDggaGVhZHNob3QtaG9sZGVyXCI+XG5cdFx0XHRcdFx0XHRcdDxpbWcgY2xhc3M9XCJoZWFkc2hvdC1pbWdcIiBzcmM9XCIuLi9wdWJsaWMvaW1nL2hlYWRzaG90cy8ke21vZGVsLnBsYXllcmlkfS5wbmdcIiBhbHQ9XCIke21vZGVsLnByb2ZpbGUubmFtZX1cIj5cblx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYS1jb250ZW50XCI+XG5cdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInRpdGxlIGlzLTRcIj4ke21vZGVsLnByb2ZpbGUubmFtZX08L3A+XG5cdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIj5XYXJkICR7bW9kZWwucHJvZmlsZS53YXJkfTwvcD5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDx0YWJsZSBjbGFzcz1cInRhYmxlIGlzLWZ1bGx3aWR0aFwiPlxuXHRcdFx0XHRcdDx0aGVhZD5cblx0XHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdFx0PHRoPkNhdGVnb3J5PC90aD5cblx0XHRcdFx0XHRcdFx0PHRoPlBvaW50czwvdGg+XG5cdFx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHRcdDwvdGhlYWQ+XG5cdFx0XHRcdFx0PHRib2R5PlxuXHRcdFx0YDtcblx0XHRcdGZvciAobGV0IGJpZCBpbiBtb2RlbC5wb2ludHMpIHtcblx0XHRcdFx0bGV0IHZhbHVlID0gbW9kZWwucG9pbnRzW2JpZF07XG5cdFx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0ZD4ke21vZGVsLnRpdGxlc1tiaWRdfTwvdGQ+XG5cdFx0XHRcdFx0XHQ8dGQ+JHt2YWx1ZSA+IDAgPyAnKycgOiAnJ30ke3ZhbHVlfTwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0YDtcblx0XHRcdH1cblx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0PHRoPlRvdGFsPC90aD5cblx0XHRcdFx0XHQ8dGg+JHttb2RlbC5zY29yZX08L3RoPlxuXHRcdFx0XHQ8L3RyPlxuXHRcdFx0YDtcblx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdDwvdGJvZHk+XG5cdFx0XHRcdDwvdGFibGU+XG5cdFx0XHRgO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fVxuXG5cdH07XG5cdHJldHVybiB2aWV3cztcbn07XG5cbmV4cG9ydCB7Vmlld3N9OyJdfQ==\n"]}